<div class="jumbotron">
  <h2 class="display-4"><%= @event.title %></h1>
  <p class="lead"><%= @event.content %></p>
  <hr class="my-4">
  <p><%= t('activerecord.attributes.event.date') + ": " + "#{@event.date.strftime("%Y/%m/%d (%a) %H:%M")}" %></p>
  <% if @event.point == 0 %>
    <p><%= t('activerecord.attributes.event.number_of_point') + ": " + "無料" %></p>
  <% else %>
    <p><%= t('activerecord.attributes.event.number_of_point') + ": " + "#{@event.point}" + " pt" %></p>
  <% end %>
  <p><%= t('activerecord.attributes.event.organizer') + ": " + User.find(@event.user_id).translated_name %></p>
  <p class="card-text">
    <!-- イベント参加を中止する -->
    <% if @tickets.present? %>
      <%= link_to t('activerecord.attributes.event.cancel'), ticket_path(ticket_id: @tickets.first.id), method: :delete,  class:"btn btn-danger btn-lg" %>
    <% else %>
    <!-- イベントに参加する -->
      <%= link_to t('activerecord.attributes.event.join'), tickets_path(event_id: @event.id, user_id: current_user.id), method: :post, class:"btn btn-success btn-lg" %>
    <% end %>

    <% if current_user.present? && Event.where(id: current_user.tickets.pluck(:event_id)).select { |e| e[:id] == @event.id}.count != 0 %>
      <%= link_to t('activerecord.attributes.button.click'), "#{@event.location}", class:"btn btn-primary btn-lg" %>
    <% end %>
  </p>
</div>

<%= link_to :back do %>
  <%= link_to t('devise.shared.links.back') ,events_path(type: "joining"),class:"btn btn-secondary"  %>
<% end %>


<% if current_user.present? && current_user.id == @event.user_id %>
    <%= link_to t('activerecord.attributes.button.edit'), edit_event_path(id: @event.id), class:"btn btn-warning pull-right" %>
<% end %>