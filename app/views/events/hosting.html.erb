<%= render "event_button" %>
<div class="row">
  <div col-md-12>
    <h3>
      <%= t('activerecord.attributes.event.hosting') %>
    </h3>
  </div>
  <div col-md-12>
    <%# 画面サイズが md lg xlの時に表示%>
    <table class="table table-bordered d-none d-sm-block d-sm-none d-md-block" id="hosting-event-table">
      <thead class="thead-dark table-active">
        <tr>
          <th scope="col"><%= t('activerecord.attributes.event.date') %></th>
          <th colspan="2" scope="col"><%= t('activerecord.attributes.event.title') %></th>
          <th scope="col"><%= t('activerecord.attributes.event.number') %></th>
          <th scope="col"><%= t('activerecord.attributes.event.receiving_point') %></th>
          <th scope="col"><%= t('activerecord.attributes.button.show') %></th>
          <th scope="col"></th>
        </tr>
      </thead>
      
      <tbody>
        <% @events.each do |e| %>
          <% if e.point == 0 %>
            <% actual_point = 0 %>
          <% elsif e.point >= 4 && e.point <= 15 %>
            <% actual_point = e.point - 2 %>
          <% elsif e.point >= 16 && e.point <= 25 %>
            <% actual_point = e.point - 3 %>
          <% elsif e.point >= 26 && e.point <= 35 %>
            <% actual_point = e.point - 4 %>
          <% elsif e.point >= 36 && e.point <= 45 %>
            <% actual_point = e.point - 5 %>
          <% elsif e.point >= 46 && e.point <= 55 %>
            <% actual_point = e.point - 6 %>
          <% elsif e.point >= 56 && e.point <= 65 %>
            <% actual_point = e.point - 7 %>
          <% elsif e.point >= 66 && e.point <= 75 %>
            <% actual_point = e.point - 8 %>
          <% elsif e.point >= 76 && e.point <= 85 %>
            <% actual_point = e.point - 9 %>
          <% elsif e.point >= 86 %>
            <% actual_point = e.point - 10 %>
          <% end %>
          
          <% if e.date < Time.now %>
            <tr style="background-color:#8f8888;">
          <% else %>
            <tr>
          <% end %>
            <th scope="row"><%= "#{e.date.strftime("%Y/%m/%d (%a) %H:%M")}" %></th>
            <td colspan="2"><%= e.title %></td>
            <td><%= e.tickets.count %></td>
            <td><%= e.tickets.count * actual_point.to_i %><%= "pt" %></td>
            <td><%= link_to t('activerecord.attributes.button.show'), event_path(id: e.id, type: params[:type]), class:"btn btn-success btn-sm " %></td>
            <% if e.point_process == false && e.date < Date.today %>
              <td><%= link_to t('activerecord.attributes.event.add_point'), add_point_events_path(id: e.id, giving_point: e.tickets.count * actual_point.to_i), method: :post, class:"btn btn-warning btn-sm " %></td>
            <% elsif e.point_process == false && e.date > Date.today %>
              <td><%= link_to t('activerecord.attributes.event.preparing'), hosting_events_path, class:"btn btn-warning btn-sm disabled" %></td>
            <% elsif e.point_process == true %>
              <td><%= link_to t('activerecord.attributes.event.proccessed'), hosting_events_path, class:"btn btn-secondary btn-sm disabled" %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>


    <%# 画面サイズがxs sm の時に表示%>
    <table class="table d-md-none d-lg-block d-lg-none d-xl-block d-xl-none" id="small-display-event-table"">
      <% @events.each do |e| %>
        <% if e.date < Time.now %>
          <tbody class="background-gray">
        <% else %>
          <tbody>
        <% end %> 
          <% if e.point == 0 %>
            <% actual_point = 0 %>
          <% elsif e.point >= 4 && e.point <= 15 %>
            <% actual_point = e.point - 2 %>
          <% elsif e.point >= 16 && e.point <= 25 %>
            <% actual_point = e.point - 3 %>
          <% elsif e.point >= 26 && e.point <= 35 %>
            <% actual_point = e.point - 4 %>
          <% elsif e.point >= 36 && e.point <= 45 %>
            <% actual_point = e.point - 5 %>
          <% elsif e.point >= 46 && e.point <= 55 %>
            <% actual_point = e.point - 6 %>
          <% elsif e.point >= 56 && e.point <= 65 %>
            <% actual_point = e.point - 7 %>
          <% elsif e.point >= 66 && e.point <= 75 %>
            <% actual_point = e.point - 8 %>
          <% elsif e.point >= 76 && e.point <= 85 %>
            <% actual_point = e.point - 9 %>
          <% elsif e.point >= 86 %>
            <% actual_point = e.point - 10 %>
          <% end %>
          <tr>
            <th><%= t('activerecord.attributes.event.date') %></th>
            <td><%= "#{e.date.strftime("%Y/%m/%d (%a) %H:%M")}" %></td>
          </tr>
          <tr>
            <th><%= t('activerecord.attributes.event.title') %></th>
            <td><%= e.title %></td>
          </tr>
          <tr>
            <th><%= t('activerecord.attributes.event.number') %></th>
            <td><%= e.tickets.count %></td>
          </tr>
          <tr>
            <th><%= t('activerecord.attributes.event.receiving_point') %></th>
            <td><%= e.tickets.count * actual_point.to_i %><%= "pt" %></td>
          </tr>
          <tr>
            <th><%= t('activerecord.attributes.button.show') %></th>
            <td>
              <%= link_to t('activerecord.attributes.button.show'), event_path(id: e.id, type: params[:type]), class:"btn btn-success" %>
              <% if e.point_process == false && e.date < Date.today %>
                <%= link_to t('activerecord.attributes.event.add_point'), add_point_events_path(id: e.id, giving_point: e.tickets.count * actual_point.to_i), method: :post, class:"btn btn-warning" %>
              <% elsif e.point_process == false && e.date > Date.today %>
                <%= link_to t('activerecord.attributes.event.preparing'), hosting_events_path, class:"btn btn-warning disabled" %>
              <% elsif e.point_process == true %>
                <%= link_to t('activerecord.attributes.event.proccessed'), hosting_events_path, class:"btn btn-primary disabled" %>
              <% end %>
            </td>
          </tr>
        </tbody>
      <% end %>
    </table>
  </div>
</div>



